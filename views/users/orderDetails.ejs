<%- include('../layouts/header.ejs') -%>  
    <!--================Header Menu Area =================-->
    <header class="header_area">
      <div class="top_menu">
        <div class="container">
          <div class="row">
            <div class="col-lg-7">
              <div class="float-left">
                <p>Phone: +91-9544669588</p>
                <p>email: vishnu18js@gmail.com</p>
              </div>
            </div>
            <div class="col-lg-5">
              <div class="float-right">
                <ul class="right_side">
                  <li>
                    <a href="">
                    track order
                    </a>
                  </li>
                  <li>
                    <a href="">
                    Contact Us
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="main_menu">
        <div class="container">
          <nav class="navbar navbar-expand-lg navbar-light w-100">
            <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand logo_h" href="/homepage">
            <img src="img/adlante (1).png" alt="" />
            </a>
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
              >
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div
              class="collapse navbar-collapse offset w-100"
              id="navbarSupportedContent"
              >
              <div class="row w-100 mr-0">
                <div class="col-lg-7 pr-0">
                  <ul class="nav navbar-nav center_nav pull-right">
                    <li class="nav-item">
                      <a class="nav-link" href="/homepage">Home</a>
                    </li>
                    <li class="nav-item active">
                      <a href="/shop" class="nav-link" role="button" aria-haspopup="true" aria-expanded="false">Shop</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="">Contact</a>
                    </li>
                  </ul>
                </div>
                <div class="col-lg-5 pr-0">
                  <ul class="nav navbar-nav navbar-right right_nav pull-right">
                    <form action="searchProduct" method="post" class="row g-3">
                      <div class="col-auto d-flex align-items-center">
                        <label for="searchProduct" class="visually-hidden">Search</label>
                        <input type="text" name="searchQuery" class="form-control" id="searchProduct" placeholder="Search">
                      </div>
                      <div class="col-auto">
                        <li class="nav-item">
                          <button type="submit" class="icons">
                          <i class="ti-search" aria-hidden="true"></i>
                          </button>
                        </li>
                      </div>
                    </form>
                    <li class="nav-item">
                      <a href="cartPage" class="icons position-relative">
                        <i class="ti-shopping-cart">
                          <span class="badge badge-danger rounded-circle position-absolute top-50 end-(-1)">
                            <% if (cart && cart.items !== null) { %>
                              <%= cart.items.length %>
                            <% } else { %>
                               0
                            <% } %>
                          </span>
                        </i>
                      </a>
                    </li>
                    <li class="nav-item">
                      <div class="dropdown">
                        <a href="#" class="icons dropdown-toggle" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="ti-user" aria-hidden="true"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                          <a class="dropdown-item" href="myProfile">My Profile</a>
                          <a class="dropdown-item" href="myProfile">Orders</a>
                          <div class="dropdown-divider"></div>
                          <a class="dropdown-item" href="/logout">Logout</a>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!--================Header Menu Area =================-->

    <!--================Home Banner Area =================-->
    <section class="banner_area">
      <div class="banner_inner d-flex align-items-center">
        <div class="container">
          <div
            class="banner_content d-md-flex justify-content-between align-items-center"
          >
            <div class="mb-3 mb-md-0">
              <h2>Orders</h2>
              <p>Very us move be blessed multiply night</p>
            </div>
            <div class="page_link">
              <a href="#">Home</a>
              <a href="#">Cart</a>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!--================End Home Banner Area =================-->

    <!--================Cart Area =================-->
    <% if (typeof order !== 'undefined' && typeof products !== 'undefined') { %>
      <form id="orderForm" action="/cancelOrder" method="post">
        <section class="cart_area">
          <div class="container">
              <div class="card card-stepper" style="border-radius: 10px;">
                <div class="card-body p-4">
                  <style>
                    .track-line {
                      height: 2px !important;
                      background-color: #488978;
                      opacity: 1;
                    }
                  
                    .dot {
                      height: 10px;
                      width: 10px;
                      margin-left: 3px;
                      margin-right: 3px;
                      margin-top: 0px;
                      background-color: #488978;
                      border-radius: 50%;
                      display: inline-block;
                    }
                  
                    .big-dot {
                      height: 25px;
                      width: 25px;
                      margin-left: 0px;
                      margin-right: 0px;
                      margin-top: 0px;
                      background-color: #488978;
                      border-radius: 50%;
                      display: inline-block;
                    }
                  
                    .big-dot i {
                      font-size: 12px;
                    }
                  
                    .card-stepper {
                      z-index: 0;
                    }
                  </style>
                  
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex flex-column">
                      <span class="lead fw-normal">Your order has been <%= order.orderStatus %></span>
                      <span class="text-muted small">by DHFL on 21 Jan, 2020</span>
                    </div>
                    <div>
                      <a class="btn btn-outline-primary" href="/invoiceDownload/<%= order.invoice %>">Invoice</a>
                    </div>
                  </div>
                  <hr class="my-4">
                  
                  <div class="d-flex flex-row justify-content-between align-items-center align-content-center">
                    <span class="dot big-dot" style="visibility: <% if (order.orderStatus === 'order placed') { %>visible<% } else { %>hidden<% } %>;"></span>
                    <hr class="flex-fill track-line" style="width: <% if (order.orderStatus === 'order placed') { %>0<% } else if (order.orderStatus === 'order shipped') { %>25<% } else if (order.orderStatus === 'order delivered') { %>50<% } else { %>0<% } %>%;">
                    <span class="dot big-dot" style="visibility: <% if (order.orderStatus === 'order shipped' || order.orderStatus === 'order delivered') { %>visible<% } else { %>hidden<% } %>;"></span>
                    <hr class="flex-fill track-line" style="width: <% if (order.orderStatus === 'order shipped' || order.orderStatus === 'order delivered') { %>0<% } else { %>0<% } %>%;">
                    <span class="dot big-dot" style="visibility: <% if (order.orderStatus === 'order delivered') { %>visible<% } else { %>hidden<% } %>;"></span>
                    <hr class="flex-fill track-line" style="width: <% if (order.orderStatus === 'order delivered') { %>0<% } else { %>0<% } %>%;">
                    <span class="dot" style="visibility: <% if (order.orderStatus === 'order delivered') { %>visible<% } else { %>hidden<% } %>;"></span>
                    <span class="d-flex justify-content-center align-items-center big-dot dot" style="visibility: <% if (order.orderStatus === 'order delivered') { %>visible<% } else { %>hidden<% } %>;">
                      <i class="fa fa-check text-white"></i>
                    </span>
                  </div>
                  
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-column align-items-start">
                      <span>15 Mar</span><span>Order placed</span>
                    </div>
                    <div class="d-flex flex-column justify-content-center align-items-center">
                      <span>15 Mar</span><span>Order Dispatched</span>
                    </div>
                    <div class="d-flex flex-column align-items-center">
                      <span>15 Mar</span><span>Out for delivery</span>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <span>15 Mar</span><span>Delivered</span>
                    </div>
                  </div>
                  
            <br><br>
            <div class="cart_inner">
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th style="text-align: center;" scope="col">Product</th>
                      <th style="text-align: center;" scope="col">Price</th>
                      <th style="text-align: center;" scope="col">Quantity</th>
                      <th style="text-align: center;" scope="col">Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% order.items.forEach((item) => { %>
                      <% const product = products.find((p) => p._id.toString() === item.productId.toString()); %>
                      <tr>
                        <td style="border: none;">
                          <div class="media">
                            <div class="d-flex">
                              <img src="/productimg/<%= product.defaultimage %>" alt="" />
                            </div>
                            <div class="media-body">
                              <p><%= product.description %></p>
                            </div>
                          </div>
                        </td>
                        <td style="border: none;">
                          <h5><%= item.price %></h5>
                        </td>
                        <td style="border: none;">
                          <h5><%= item.quantity %></h5>
                        </td>
                        <td style="border: none;">
                          <h5><%= item.price * item.quantity %></h5>
                        </td>
                      </tr>
                    <% }) %>
                    <tr class="bottom_button">
                      <td style="border: none;">
                        <input type="hidden" name="orderId" value="<%= order.orderId %>" >
                        <button onclick="canselOrder()" type="submit" style="border-radius: 50%;" >
                          cancel order
                        </button>
                      </td>
                      <td style="border: none;"></td>
                      <td style="border: none;"></td>
                    </tr>
                    <tr>
                      <td style="border: none;"></td>
                      <td style="border: none;"></td>
                      <td style="border: none;">
                        <h5>Subtotal</h5>
                      </td>
                      <td style="border: none;">
                        <h5 id="subtotal"><%= order.subtotal %></h5>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>
      </form>
    <% } else { %>
      <h3>no order available</h3>
    <% } %>
    <!--================End Cart Area =================-->

    <!--================ start footer Area  =================-->
    <footer class="footer-area section_gap">
      <div class="container">
        <div class="row">
          <div class="col-lg-2 col-md-6 single-footer-widget">
            <h4>Top Products</h4>
            <ul>
              <li><a href="#">Managed Website</a></li>
              <li><a href="#">Manage Reputation</a></li>
              <li><a href="#">Power Tools</a></li>
              <li><a href="#">Marketing Service</a></li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 single-footer-widget">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="#">Jobs</a></li>
              <li><a href="#">Brand Assets</a></li>
              <li><a href="#">Investor Relations</a></li>
              <li><a href="#">Terms of Service</a></li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 single-footer-widget">
            <h4>Features</h4>
            <ul>
              <li><a href="#">Jobs</a></li>
              <li><a href="#">Brand Assets</a></li>
              <li><a href="#">Investor Relations</a></li>
              <li><a href="#">Terms of Service</a></li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 single-footer-widget">
            <h4>Resources</h4>
            <ul>
              <li><a href="#">Guides</a></li>
              <li><a href="#">Research</a></li>
              <li><a href="#">Experts</a></li>
              <li><a href="#">Agencies</a></li>
            </ul>
          </div>
          <div class="col-lg-4 col-md-6 single-footer-widget">
            <h4>Newsletter</h4>
            <p>You can trust us. we only send promo offers,</p>
            <div class="form-wrap" id="mc_embed_signup">
              <form method="get" class="form-inline">
                <input class="form-control" name="EMAIL" placeholder="Your Email Address" onfocus="this.placeholder = ''"
                  onblur="this.placeholder = 'Your Email Address '" required="" type="email">
                <button class="click-btn btn btn-default">Subscribe</button>
                <div style="position: absolute; left: -5000px;">
                  <input tabindex="-1" value="" type="text">
                </div>
  
                <div class="info"></div>
              </form>
            </div>
          </div>
        </div>
        <div class="footer-bottom row align-items-center">
          <p class="footer-text m-0 col-lg-8 col-md-12"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">jis</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
          <div class="col-lg-4 col-md-12 footer-social">
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-dribbble"></i></a>
            <a href="#"><i class="fa fa-behance"></i></a>
          </div>
        </div>
      </div>
    </footer>
    <!--================ End footer Area  =================-->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/popper.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/stellar.js"></script>
    <script src="/vendors/lightbox/simpleLightbox.min.js"></script>
    <script src="/vendors/nice-select/js/jquery.nice-select.min.js"></script>
    <script src="/vendors/isotope/imagesloaded.pkgd.min.js"></script>
    <script src="/vendors/isotope/isotope-min.js"></script>
    <script src="/vendors/owl-carousel/owl.carousel.min.js"></script>
    <script src="/js/jquery.ajaxchimp.min.js"></script>
    <script src="/js/mail-script.js"></script>
    <script src="/vendors/jquery-ui/jquery-ui.js"></script>
    <script src="/vendors/counter-up/jquery.waypoints.min.js"></script>
    <script src="/vendors/counter-up/jquery.counterup.js"></script>
    <script src="/js/theme.js"></script>
    <script>
      function canselOrder(){
        alert('order has been cancelled...');
      }
    </script>
    
<%- include('../layouts/footer.ejs') -%>
